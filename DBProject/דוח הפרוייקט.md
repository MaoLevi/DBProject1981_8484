# 🌟 דוח פרויקט – מערכת לניהול מסד נתונים למסעדה 🌟

## מגישים
- **מאור לוי** (328301981)
- **ארי עוז** (321918484)

---

## 📋 תיאור הארגון
מערכת לניהול מסד נתונים עבור מסעדה, הכוללת ניהול הזמנות, תשלומים, עובדים, לקוחות, ושולחנות – עם דגש על שלמות, אמינות, ויעילות הנתונים.

---

## 📑 תוכן עניינים
1. [תיאור הארגון](#תיאור-הארגון)
2. 🟦 שלב א' – בניית בסיס הנתונים והגדרת ישויות
    1. [פירוט הישויות](#פירוט-הישויות)
    2. [קשרים בין הישויות](#קשרים-בין-הישויות)
    3. [ניתוח נירמול (3NF)](#ניתוח-נירמול-3nf)
    4. [התרשימים](#התרשימים)
    5. [שיטות הכנסת נתונים](#שיטות-הכנסת-נתונים)
    6. [צילומי מסך – גיבוי ושחזור](#צילומי-מסך-גיבוי-ושחזור)
    7. [הפקודות SQL](#הפקודות-sql)
    8. [סיכום שלב א'](#סיכום-שלב-א)
3. 🚀 שלב ב' – שאילתות מתקדמות, מגבלות, ועדכונים
    1. [קבצי שלב ב'](#קבצי-שלב-ב)
    2. [דוגמאות למגבלות (Constraints)](#דוגמאות-למגבלות-constraints)
    3. [דוגמאות לשאילתות SELECT מתקדמות](#דוגמאות-לשאילתות-select-מתקדמות)
    4. [דוגמאות לעדכון (UPDATE) ומחיקה (DELETE)](#דוגמאות-לעדכון-update-ומחיקה-delete)
    5. [ניהול טרנזקציות – Commit & Rollback](#ניהול-טרנזקציות-commit--rollback)
    6. [סיכום שלב ב'](#סיכום-שלב-ב)

---

# 🟦 שלב א' – בניית בסיס הנתונים והגדרת ישויות

## פירוט הישויות
- **Dish** – מנות המסעדה
- **Payment** – תשלומים
- **Waiter** – מלצרים
- **Customer** – לקוחות
- **RestTable** – שולחנות
- **RestOrder** – הזמנות
- **part_of_order** – קישור בין מנות להזמנות

> לכל ישות תיאור, שדות עיקריים, ותפקידה במערכת.

## קשרים בין הישויות
- תרשים ERD מציג את כל הקשרים (1:1, 1:N, N:M) בין הישויות.

## ניתוח נירמול (3NF)
- כל טבלה עומדת בכללי 3NF – כל שדה תלוי במפתח הראשי בלבד.

## התרשימים
- ![ERD](DBProject/328301981_321918484/שלב%20א/ERD.png)
- ![DSD](DBProject/328301981_321918484/שלב%20א/DSD.png)

## שיטות הכנסת נתונים
- **Mockaroo** – יצירת נתונים סינתטיים (ראו צילום מסך)
- **GenerateData** – יצירת טבלאות מותאמות אישית
- **סקריפט פייתון** – הכנסת נתונים אוטומטית

| Mockaroo | GenerateData | Python |
|---|---|---|
| ![Mockaroo](DBProject/328301981_321918484/שלב%20א/MOCKAROO.png) | ![GenerateData](DBProject/328301981_321918484/שלב%20א/GENERTDATA.png) | <img src="DBProject/328301981_321918484/שלב%20א/PYCHARM.png" width="120"/> |

## צילומי מסך – גיבוי ושחזור
- **גיבוי:**
  - ![OPEN BACKUP](DBProject/328301981_321918484/שלב%20א/OPENBACKUP.png)
  - ![BACKUP](DBProject/328301981_321918484/שלב%20א/BACKUP.png)
- **שחזור:**
  - ![RESTORE](DBProject/328301981_321918484/שלב%20א/RESTORE.png)

## הפקודות SQL
- דוגמאות ל-`CREATE`, `INSERT`, `SELECT`, `DROP` – עם הסברים ודוגמאות קוד.

## סיכום שלב א'
- בסיס נתונים מלא, מאורגן, מנותח ומגובה.

---

# 🚀 שלב ב' – שאילתות מתקדמות, מגבלות, ועדכונים

## קבצי שלב ב'
- Constraints.sql, SelectQueries.sql, UpdateQueries.sql, DeleteQueries.sql, RollbackCommit (צילומי מסך)

## דוגמאות למגבלות (Constraints)
- אילוצים על ערכים, ייחודיות, ערכי ברירת מחדל, תאריכים, ועוד.
- דוגמה:
```sql
ALTER TABLE Dish ADD CONSTRAINT check_time_to_make CHECK (time_to_make <= TIME '01:00:00');
```

## דוגמאות לשאילתות SELECT מתקדמות
- שליפת מנות איטיות, חישוב הכנסה יומית, לקוחות קבועים.
- דוגמה:
```sql
SELECT Dish.Dish_Name, Dish.time_to_make, Customer.Full_Name AS Customer
FROM RestOrder
JOIN part_of_order ON RestOrder.RestOrder_ID = part_of_order.RestOrder_ID
JOIN Dish ON Dish.Dish_ID = part_of_order.Dish_ID
WHERE Dish.time_to_make > '00:20:00';
```

## דוגמאות לעדכון (UPDATE) ומחיקה (DELETE)
- עדכון סטטוס שולחן, מחיקת מנות לא פעילות, מחיקת לקוחות לא פעילים.
- דוגמה:
```sql
DELETE FROM Dish WHERE Dish_ID NOT IN (SELECT DISTINCT Dish_ID FROM part_of_order);
```

## ניהול טרנזקציות – Commit & Rollback

<table>
  <tr>
    <td align="center"><b>1. לפני שינוי</b><br><img src="DBProject/328301981_321918484/שלב ב/RollbackCommit/ביצוע לפני ROLLBACK.png" width="300"/></td>
    <td align="center"><b>2. אחרי Commit</b><br><img src="DBProject/328301981_321918484/שלב ב/RollbackCommit/ביצוע COMMIT.png" width="300"/></td>
  </tr>
  <tr>
    <td align="center"><b>3. לפני Rollback</b><br><img src="DBProject/328301981_321918484/שלב ב/RollbackCommit/ביצוע ROLLBACK.png" width="300"/></td>
    <td align="center"><b>4. אחרי Rollback</b><br><img src="DBProject/328301981_321918484/שלב ב/RollbackCommit/צילום אחרי ROLLBACK.png" width="300"/></td>
  </tr>
</table>

> ניהול טרנזקציות מבטיח שכל שינוי קריטי יתבצע בשלמותו או יתבטל לחלוטין במקרה של תקלה.

## סיכום שלב ב'
- מסד נתונים אמין, עם מגבלות, שאילתות מתקדמות, עדכונים, מחיקות, וניהול טרנזקציות מקצועי.

---

# 💡 סיכום כללי
הפרויקט מדגים תכנון, בנייה, תיעוד, וניהול של מערכת מסדי נתונים מודרנית למסעדה – כולל כל שלבי החיים של המידע, דגש על אמינות, גיבוי, שלמות, ויכולת ניתוח מתקדמת.

---

*הדוח נכתב ועוצב בקפידה, כולל דוגמאות קוד, צילומי מסך, והסברים מפורטים לכל שלב.*
